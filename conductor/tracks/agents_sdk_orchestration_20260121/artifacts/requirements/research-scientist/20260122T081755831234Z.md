# Paired Subagent Review (research-scientist)

Provider: openai
Model: gpt-5.2-codex

---

- **Agents SDK orchestration: choose LLM‑led vs code‑led and encode in spec.** OpenAI’s Agents SDK provides Agent/Handoff/Guardrail/Session primitives for multi‑step workflows; decide where you want autonomous planning vs deterministic scripted steps, and document that in the plan (risk: too much LLM‑led autonomy can cause unpredictable flows; too much code‑led limits adaptability). Source: https://developers.openai.com/tracks/building-agents  
- **Use handoffs for modular specialist agents.** Structure the workflow so the primary agent can `handoff(...)` to domain specialists; this keeps prompts smaller and roles clear (risk: handoff boundaries must be explicit or you’ll get looping/duplicate tool calls). Source: https://developers.openai.com/tracks/building-agents  
- **Enforce guardrails + structured outputs.** Add guardrail steps to validate/approve inputs and require JSON‑schema outputs to make parsing deterministic (risk: unstructured responses break downstream parsers; ensure schema is in spec). Source: https://developers.openai.com/tracks/building-agents  
- **LiteLLM routing for Claude: use provider prefix and proxy endpoints.** For Anthropic, route via `model="anthropic/claude-..."` or send to `<LITELLM_BASE>/anthropic/...`; specify this explicitly in config (risk: forgetting prefix or endpoint breaks routing). Source: https://docs.litellm.ai/docs/providers/anthropic  
- **Leverage LiteLLM param mapping and structured outputs support.** LiteLLM auto‑adds `max_tokens`, maps OpenAI‑style params to Anthropic, and converts `response_format` to `output_schema` for supported models (risk: relying on implicit defaults may hide token caps; decide whether to set explicit `max_tokens` in spec). Source: https://docs.litellm.ai/docs/providers/anthropic  
- **Pytest gating: register and enforce integration markers.** Add `integration` marker in `pyproject.toml`/`pytest.ini` and set CI to run `pytest -m "not integration"` by default; run `-m integration` explicitly in a separate job (risk: unregistered markers cause warnings; integration tests might be skipped unintentionally). Source: https://stackoverflow.com/questions/66315234/exclude-some-tests-by-default

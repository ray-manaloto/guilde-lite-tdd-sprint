## Design Decisions
- **Conductor-first artifacts**: All subagent outputs return as **patches/diffs** against `spec.md` or `plan.md` (no standalone docs). Conductor artifacts remain canonical; subagent responses are machine-applicable edits plus a short summary.
- **Context packaging**: Provide subagents a **minimal context bundle**: relevant Conductor artifact excerpt, task objective, constraints (no PydanticAI; OpenAI Agents SDK + LiteLLM for Anthropic), and required output format (unified diff). Avoid full repo dumps.
- **Workflow integration**: Trigger cloud subagents in **Plan stage** for Deep Research, and optionally in **Verify** for compliance checks (e.g., spec/plan alignment). Use **event-driven** Conductor tasks with concurrency caps.
- **Isolation + least privilege**: Run subagents in sandboxed compute (Lambda/Fargate) with VPC egress controls; IAM scoped to read-only access on required artifacts and write access only to patch artifact locations.
- **Observability + cost control**: Track token usage and runtime per subagent call; enforce timeouts and budgets; log trace IDs mapping to Conductor task IDs.

## Deliverables
- **Conductor task definitions** for `SubagentResearchTask` and `SubagentReviewTask` with I/O schemas (context bundle in, diff patch out).
- **Context bundle template** in repo (`/context/templates/subagent_context.md`) specifying required sections and constraints.
- **Artifact patch pipeline**: automated application of returned diffs to `spec.md`/`plan.md`, with validation checks.

## Gates
- **Spec/Plan consistency gate**: Patch must apply cleanly and pass linting; reject if touching non-target files.
- **Budget gate**: Token/cost cap per task; fail fast on overruns.
- **Isolation gate**: Subagent tasks require VPC egress allowlist + short timeouts; no direct repo write except via patch mechanism.

## Risks/Dependencies
- **Patch conflicts** if base artifact changes between dispatch and return; mitigate with artifact versioning and rebase retries.
- **Over-contexting** leads to cost spikes and leakage; mitigate with strict context templates and truncation.
- **Observability gaps** without consistent trace IDs; require Conductor task ID propagation.

## Open Questions
- Which Conductor task orchestrator will own **patch application** and conflict resolution?
- What are the **max context/token limits** per provider for subagent tasks?
- Do we need an **arbiter/consensus subagent** for conflicting research outputs, or a single supervisor?